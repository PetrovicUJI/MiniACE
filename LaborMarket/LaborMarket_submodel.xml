<!DOCTYPE xmodel SYSTEM "http://miniace.cs.bilgi.edu.tr/XMML.dtd">
<xmodel version="1" >
	<name>Labor_Market</name>
	<version>Version 1.1, 05/10/2017</version>
	<description>Authors: Marko Petrovic</description>
	<models/>
	<environment>
		<constants>
			<variable>
			<type>int</type>
			<name>max_number_of_job_applications</name>
			<description></description>
			</variable>
		</constants>
		<functionFiles>
		   <file>Firm_Labor_Market_Functions.c</file>
		   <file>Household_Labor_Market_Functions.c</file>
		   <file>Household_Labor_Market_AUX_Functions.c</file>
		</functionFiles>
		<timeUnits/>
		<dataTypes>
			<dataType>
				<name>Employee</name>
				<description>Employee data.</description>
				<variables>
					<variable>
						<type>int</type>
						<name>id</name>
						<description></description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage</name>
						<description>Workers' monthly salary.</description>
					</variable>
				</variables>
			</dataType>
			<dataType>
				<name>Vacancy</name>
				<description>A vacancy send by an employer.</description>
				<variables>
					<!-- (employer_id, number_of_vacancies) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of agents that demand labor.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>number_of_vacancies</name>
						<description>The number of posted vacancies.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage_offer</name>
						<description>Firms offer wage for new vacancies.</description>
					</variable>
				</variables>
			</dataType>
			<dataType>
				<name>Job_offer</name>
				<description>A vacancy send by an employer.</description>
				<variables>
				<!-- (employer_id, employee_id, wage) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of a new employer.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage</name>
						<description>The offered wage.</description>
					</variable>
				</variables>
			</dataType>
			<dataType>
				<name>Job_application</name>
				<description>A job application send by an unemployed agent.</description>
				<variables>
				<!-- (employee_id, reservation_wage) -->
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>reservation_wage</name>
						<description>The reservation wage of agents that are looking for a job.</description>
					</variable>
				</variables>
			</dataType>
		</dataTypes>
	</environment>
	<agents>
		<xagent>
			<name>Firm</name>
			<description></description>
			<memory>
				<variable>
					<type>Employee_array</type>
					<name>employees</name>
					<description>A vector of employees in a firm.</description>
				</variable>
				<variable>
					<type>int</type>
					<name>labor_requirement</name>
					<description>A number of workers needed to fulfill the production plan.</description>
				</variable>
				<variable>
					<type>int</type>
					<name>delta_labor_requirement</name>
					<description>A number of workers to be hired or fired according to the planed labor requirement.</description>
				</variable>
				<variable>
					<type>double</type>
					<name>wage</name>
					<description>Monthly salary per employee.</description>
				</variable>
				<variable>
					<type>double</type>
					<name>wage_offer</name>
					<description>Offered salary for new employees.</description>
				</variable>
			</memory>
			<functions>
				<function>
					<name>Firm_calculate_labor_demand</name>
					<description></description>
					<currentState>Firm_LaborDemand</currentState>
					<nextState>Firm_LaborMarket</nextState>
					<inputs/>
					<outputs/>
				</function>
				<function>
					<name>Firm_send_redundancies</name>
					<description></description>
					<currentState>Firm_LaborMarket</currentState>
					<nextState>Firm_MonthlyAccounting</nextState>
					<condition>
						<lhs>
							<value>a.delta_labor_requirement</value>
						</lhs>
						<op>LEQ</op>
						<rhs>
							<value>0</value>
						</rhs>
					</condition>
					<inputs/>
					<outputs>
						<output>
							<messageName>redundancies</messageName>
						</output>
					</outputs>
				</function>
				<function>
					<name>Firm_post_vacancies</name>
					<description></description>
					<currentState>Firm_LaborMarket</currentState>
					<nextState>Firm_SelectionProcess</nextState>
					<condition>
					<not>
						<lhs>
							<value>a.delta_labor_requirement</value>
						</lhs>
						<op>LEQ</op>
						<rhs>
							<value>0</value>
						</rhs>
					</not>
					</condition>
					<inputs/>
					<outputs>
						<output>
							<messageName>vacancies</messageName>
						</output>
					</outputs>
				</function>
				<function>
					<name>Firm_read_job_applications_and_send_job_offers</name>
					<description></description>
					<currentState>Firm_SelectionProcess</currentState>
					<nextState>Firm_HiringProcess</nextState>
					<inputs>
						<input>
							<messageName>job_applications</messageName>
							<filter>
								<lhs>
									<value>a.id</value>
								</lhs>
								<op>EQ</op>
								<rhs>
									<value>m.employer_id</value>
								</rhs>
							</filter>
						</input>
					</inputs>
					<outputs>
						<output>
							<messageName>job_offer</messageName>
						</output>
					</outputs>
				</function>
				<function>
					<name>Firm_hire_new_workers</name>
					<description></description>
					<currentState>Firm_HiringProcess</currentState>
					<nextState>Firm_StillDemandLabor</nextState>
					<inputs>
						<input>
							<messageName>job_acceptance</messageName>
							<filter>
								<lhs>
									<value>a.id</value>
								</lhs>
								<op>EQ</op>
								<rhs>
									<value>m.employer_id</value>
								</rhs>
							</filter>
						</input>
					</inputs>
					<outputs/>
				</function>
				<function>
					<name>Idle</name>
					<description></description>
					<currentState>Firm_StillDemandLabor</currentState>
					<nextState>Firm_MonthlyAccounting</nextState>
					<condition>
						<lhs>
							<value>a.delta_labor_requirement</value>
						</lhs>
						<op>LEQ</op>
						<rhs>
							<value>0</value>
						</rhs>
					</condition>
					<inputs/>
					<outputs/>
				</function>
				<function>
					<name>Firm_post_vacancies_2</name>
					<description></description>
					<currentState>Firm_StillDemandLabor</currentState>
					<nextState>Firm_SelectionProcess_2</nextState>
					<condition>
						<not>
							<lhs>
								<value>a.delta_labor_requirement</value>
							</lhs>
							<op>LEQ</op>
							<rhs>
								<value>0</value>
							</rhs>
						</not>
					</condition>
					<inputs/>
					<outputs>
						<output>
							<messageName>vacancies_2</messageName>
						</output>
					</outputs>
				</function>	
				<function>
					<name>Firm_read_job_applications_and_send_job_offers_2</name>
					<description></description>
					<currentState>Firm_SelectionProcess_2</currentState>
					<nextState>Firm_HiringProcess_2</nextState>
					<inputs>
						<input>
							<messageName>job_applications_2</messageName>
						</input>
					</inputs>
					<outputs>
						<output>
							<messageName>job_offer_2</messageName>
						</output>
					</outputs>
				</function>
				<function>				
					<name>Firm_hire_new_workers_2</name>
					<description></description>
					<currentState>Firm_HiringProcess_2</currentState>
					<nextState>Firm_MonthlyAccounting</nextState>
					<inputs>
						<input>
							<messageName>job_acceptance_2</messageName>
						</input>
					</inputs>
					<outputs/>
				</function>	
			</functions>
		</xagent>
		<xagent>
			<name>Household</name>
			<description></description>
			<memory>
				<variable>
					<type>double</type>
					<name>wage</name>
					<description>Households' reservation wage.</description>
				</variable>
				<variable>
					<type>double</type>
					<name>reservation_wage</name>
					<description>Households' reservation wage.</description>
				</variable>
				<variable>
					<type>int</type>
					<name>employer_id</name>
					<description>Households' reservation wage.</description>
				</variable>
				<variable>
					<type>int</type>
					<name>days_of_unemployment</name>
					<description>Households count days of being unemployed.</description>
				</variable>
			</memory>
			<functions>
				<function>
					<name>Household_send_unemployment_benefit_request</name>
					<description></description>
					<currentState>Start_Household</currentState>
					<nextState>Household_LaborMarket</nextState>
					<condition>
						<lhs>
							<value>a.employer_id</value>
						</lhs>
						<op>EQ</op>
						<rhs>
							<value>-1</value>
						</rhs>
					</condition>
					<inputs/>
					<outputs/>
				</function>
				<function>
					<name>Household_get_fired</name>
					<description></description>
					<currentState>Start_Household</currentState>
					<nextState>End_Household</nextState>
					<condition>
						<not>
							<lhs>
								<value>a.employer_id</value>
							</lhs>
							<op>EQ</op>
							<rhs>
								<value>-1</value>
							</rhs>
						</not>
					</condition>
					<inputs>
						<input>
							<messageName>redundancies</messageName>
							<filter>
								<lhs>
									<value>a.id</value>
								</lhs>
								<op>EQ</op>
								<rhs>
									<value>m.employee_id</value>
								</rhs>
							</filter>
						</input>
					</inputs>
					<outputs/>
				</function>
				<function>
					<name>Household_read_vacancies_and_send_job_applications</name>
					<description></description>
					<currentState>Household_LaborMarket</currentState>
					<nextState>Household_JobAcceptance</nextState>
					<inputs>
						<input>
							<messageName>vacancies</messageName>
						</input>
					</inputs>
					<outputs>
						<output>
							<messageName>job_applications</messageName>
						</output>
					</outputs>
				</function>
				<function>
					<name>Household_accept_job</name>
					<description></description>
					<currentState>Household_JobAcceptance</currentState>
					<nextState>Household_StillUnemployed</nextState>
					<inputs>
						<input>
							<messageName>job_offer</messageName>
							<filter>
								<lhs>
									<value>a.id</value>
								</lhs>
								<op>EQ</op>
								<rhs>
									<value>m.employee_id</value>
								</rhs>
							</filter>
						</input>
					</inputs>
					<outputs>
						<output>
							<messageName>job_acceptance</messageName>
						</output>
					</outputs>
				</function>
				<function>
					<name>Idle</name>
					<description></description>
					<currentState>Household_StillUnemployed</currentState>
					<nextState>End_Household</nextState>
					<condition>
						<not>
							<lhs>
								<value>a.employer_id</value>
							</lhs>
							<op>EQ</op>
							<rhs>
								<value>-1</value>
							</rhs>
						</not>
					</condition>
				</function>
				<function>
					<name>Household_read_vacancies_and_send_job_applications_2</name>
					<description></description>
					<currentState>Household_StillUnemployed</currentState>
					<nextState>Household_JobAcceptance_2</nextState>
					<condition>
						<lhs>
							<value>a.employer_id</value>
						</lhs>
						<op>EQ</op>
						<rhs>
							<value>-1</value>
						</rhs>
					</condition>
					<inputs>
						<input>
							<messageName>vacancies_2</messageName>
						</input>
					</inputs>
					<outputs>
						<output>
							<messageName>job_applications_2</messageName>
						</output>
					</outputs>
				</function>
				<function>
					<name>Household_accept_job_2</name>
					<description></description>
					<currentState>Household_JobAcceptance_2</currentState>
					<nextState>End_Household</nextState>
					<inputs>
						<input>
							<messageName>job_offer_2</messageName>
						</input>
					</inputs>
					<outputs>
						<output>
							<messageName>job_acceptance_2</messageName>
						</output>
					</outputs>
				</function>
			</functions>
		</xagent>
	</agents>
	<messages>
		<message>
			<name>vacancies</name>
			<description>Message added by agents to post new vacancies.</description>
				<variables>
				<!-- (employer_id, number_of_vacancies, wage_offer) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of agents that demand labor.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>number_of_vacancies</name>
						<description>The number of posted vacancies.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage_offer</name>
						<description>Firms offer wage for new vacancies.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>vacancies_2</name>
			<description>Message added by agents to post new vacancies.</description>
				<variables>
				<!-- (employer_id, number_of_vacancies, wage_offer) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of agents that demand labor.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>number_of_vacancies</name>
						<description>The number of posted vacancies.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage_offer</name>
						<description>Firms offer wage for new vacancies.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>redundancies</name>
			<description>Message added by agents to fire redundant employees.</description>
				<variables>
				<!-- (employer_id, employee_id) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>It is set to -1 meaning that an agent will lose its job.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agent who will lose his/her job.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>job_applications</name>
			<description>Message added by agents to post new vacancies.</description>
				<variables>
					<!-- (employer_id, employee_id, reservation_wage) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of employers.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>reservation_wage</name>
						<description>The reservation wage of agents that are looking for a job.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>job_applications_2</name>
			<description>Message added by agents to post new vacancies.</description>
				<variables>
					<!-- (employer_id, employee_id, wage) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of employers.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>reservation_wage</name>
						<description>The reservation wage of agents that are looking for a job.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>job_offer</name>
			<description>Message added by agents to offer a new job.</description>
				<variables>
				<!-- (employer_id, employee_id, wage) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of a new employer.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage</name>
						<description>The offered wage.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>job_offer_2</name>
			<description>Message added by agents to offer a new job.</description>
				<variables>
				<!-- (employer_id, employee_id, wage) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of a new employer.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage</name>
						<description>The offered wage.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>job_acceptance</name>
			<description>Message added by agents to accept a new job.</description>
				<variables>
				<!-- (employer_id, employee_id, wage) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of a new employer.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage</name>
						<description>The accepted wage.</description>
					</variable>
				</variables>
		</message>
		<message>
			<name>job_acceptance_2</name>
			<description>Message added by agents to accept a new job.</description>
				<variables>
				<!-- (employer_id, employee_id, wage) -->
					<variable>
						<type>int</type>
						<name>employer_id</name>
						<description>ID of a new employer.</description>
					</variable>
					<variable>
						<type>int</type>
						<name>employee_id</name>
						<description>ID of agents that supply labor.</description>
					</variable>
					<variable>
						<type>double</type>
						<name>wage</name>
						<description>The accepted wage.</description>
					</variable>
				</variables>
		</message>
	</messages>
</xmodel>
